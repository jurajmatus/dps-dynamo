[supervisord]
nodaemon = true

[program:rsyslogd]
;user = www-data
command = /usr/bin/init-rsyslog.sh
stdout_logfile = /var/log/supervisor/%(program_name)s.log
stderr_logfile = /var/log/supervisor/%(program_name)s.log
autorestart = true

[program:dropwizard]
;user = www-data
command = /usr/bin/app.sh
stdout_logfile = /var/log/supervisor/%(program_name)s.log
stderr_logfile = /var/log/supervisor/%(program_name)s.log
autorestart = false

;[program:consul]
;eth0=overlay IP
;eth1=docker gw bridge IP
;command = bash -c 'sed -i s/127.0.0.1/$(ip a | grep "inet.*eth1" | grep -Eo "inet ([0-9]+\.){3}[0-9]+" | cut -d " " -f 2)/g /etc/consul.d/config.json && sed -i s/NODE1_IP/${NODE1_IP}/g /etc/consul.d/config.json && sed -i s/NODE2_IP/${NODE2_IP}/g /etc/consul.d/config.json && /usr/bin/consul agent -config-dir=/etc/consul.d -config-file=/etc/consul.d/config.json'
;stdout_logfile = /var/log/supervisor/%(program_name)s.log
;stderr_logfile = /var/log/supervisor/%(program_name)s.log
;autorestart = true

